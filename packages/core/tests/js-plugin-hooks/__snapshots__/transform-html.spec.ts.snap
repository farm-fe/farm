// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Js Plugin Execution - transformHtml 1`] = `
"<!doctype html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1.0"><meta head><meta style><title>Document</title><script data-farm-entry-script=true>(globalThis||window||global).f081367f80fe14896375a9f8b8918ca3={},(globalThis||window||global).f081367f80fe14896375a9f8b8918ca3={__FARM_TARGET_ENV__:"browser"},function(e,t){var r={};function o(e){return Promise.resolve(i(e))}function i(t){if(r[t])return r[t].exports;var s={id:t,exports:{}};return r[t]=s,e[t](s,s.exports,i,o),s.exports}i(t)}({"433f8f8e":function(e,t,r,o){"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ModuleSystem:function(){return n.ModuleSystem},Plugin:function(){return u.FarmRuntimePlugin}});let s=r("b15359af")._(r("52b7cefa")),n=r("ed7c2b04"),u=r("c30e104f");r("d9ce229e").__farm_global_this__.__farm_module_system__=(i=new n.ModuleSystem,function(){return i})(),(globalThis||window||global).f081367f80fe14896375a9f8b8918ca3.__farm_module_system__.setPlugins([s.default])},"52b7cefa":function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let i="undefined"!=typeof globalThis?globalThis:window,s={name:"farm-runtime-import-meta",_moduleSystem:{},bootstrap(e){this._moduleSystem=e},moduleCreated(e){e.meta.env={...{NODE_ENV:"production"}??{},mode:process.env.NODE_ENV,dev:"development"===process.env.NODE_ENV,prod:"production"===process.env.NODE_ENV};let t=this._moduleSystem.publicPaths?.[0]||"",{location:r}=i,o=r?\`\${r.protocol}//\${r.host}\${t.replace(/\\/$/,"")}/\${e.id}?t=\${Date.now()}\`:e.resource_pot;e.meta.url=o}}},"966536f1":function(e,t,r,o){"use strict";function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=s?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(o,n,u):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{_:function(){return s},_interop_require_wildcard:function(){return s}})},b15359af:function(e,t,r,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{_:function(){return i},_interop_require_default:function(){return i}})},c30e104f:function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FarmRuntimePluginContainer",{enumerable:!0,get:function(){return i}});class i{plugins=[];constructor(e){this.plugins=e}hookSerial(e,...t){for(let r of this.plugins){let o=r[e];o&&o.apply(r,t)}}hookBail(e,...t){for(let r of this.plugins){let o=r[e];if(o){let e=o.apply(r,t);if(e)return e}}}}},d2805128:function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Module",{enumerable:!0,get:function(){return i}});class i{id;exports;resource_pot;meta;require;constructor(e,t){this.id=e,this.exports={},this.meta={env:{}},this.require=t}}},d9ce229e:function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ResourceLoader:function(){return u},__farm_global_this__:function(){return i},isBrowser:function(){return n},targetEnv:function(){return s}});let i=(globalThis||window||global).f081367f80fe14896375a9f8b8918ca3,s=i.__FARM_TARGET_ENV__||"node",n="browser"===s&&(globalThis||window).document;class u{moduleSystem;_loadedResources;_loadingResources;publicPaths;constructor(e,t){this.moduleSystem=e,this._loadedResources={},this._loadingResources={},this.publicPaths=t}load(e,t=0){if(!n){let t=this.moduleSystem.pluginContainer.hookBail("loadResource",e);if(t)return t.then(t=>{if(!t.success&&t.retryWithDefaultResourceLoader){if("script"===e.type)return this._loadScript(\`./\${e.path}\`);if("link"===e.type)return this._loadLink(\`./\${e.path}\`)}else if(!t.success)throw Error(\`[Farm] Failed to load resource: "\${e.path}, type: \${e.type}". Original Error: \${t.err}\`)});if("script"===e.type)return this._loadScript(\`./\${e.path}\`);if("link"===e.type)return this._loadLink(\`./\${e.path}\`)}let r=this.publicPaths[t],o=\`\${r.endsWith("/")?r.slice(0,-1):r}/\${e.path}\`;if(this._loadedResources[e.path])return;if(this._loadingResources[e.path])return this._loadingResources[e.path];let i=this.moduleSystem.pluginContainer.hookBail("loadResource",e);return i?i.then(r=>{if(r.success)this.setLoadedResource(e.path);else if(r.retryWithDefaultResourceLoader)return this._load(o,e,t);else throw Error(\`[Farm] Failed to load resource: "\${e.path}, type: \${e.type}". Original Error: \${r.err}\`)}):this._load(o,e,t)}setLoadedResource(e,t=!0){this._loadedResources[e]=t}isResourceLoaded(e){return this._loadedResources[e]}_load(e,t,r){let o=Promise.resolve();return"script"===t.type?o=this._loadScript(e):"link"===t.type&&(o=this._loadLink(e)),this._loadingResources[t.path]=o,o.then(()=>{this._loadedResources[t.path]=!0,this._loadingResources[t.path]=null}).catch(o=>{if(console.warn(\`[Farm] Failed to load resource "\${e}" using publicPath: \${this.publicPaths[r]}\`),++r<this.publicPaths.length)return this._load(e,t,r);throw this._loadingResources[t.path]=null,Error(\`[Farm] Failed to load resource: "\${t.path}, type: \${t.type}". \${o}\`)}),o}_loadScript(e){return n?new Promise((t,r)=>{let o=document.createElement("script");o.src=e,document.body.appendChild(o),o.onload=()=>{t()},o.onerror=e=>{r(e)}}):import(e)}_loadLink(e){return n?new Promise((t,r)=>{let o=document.createElement("link");o.rel="stylesheet",o.href=e,document.head.appendChild(o),o.onload=()=>{t()},o.onerror=e=>{r(e)}}):Promise.resolve()}}},ed3f3d30:function(e,t,r,o){"use strict";function i(e,t){return Object.keys(e).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{_:function(){return i},_export_star:function(){return i}})},ed7c2b04:function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ModuleSystem",{enumerable:!0,get:function(){return h}});let i=r("d2805128"),s=r("c30e104f"),n=r("d9ce229e"),u=r("b15359af"),l=r("966536f1"),a=r("ed3f3d30"),c=globalThis||window,d={"@swc/helpers/_/_interop_require_default":{default:u._interop_require_default,_:u._interop_require_default},"@swc/helpers/_/_interop_require_wildcard":{default:l._interop_require_wildcard,_:l._interop_require_wildcard},"@swc/helpers/_/_export_star":{default:a._export_star,_:a._export_star}};class h{modules;cache;externalModules;reRegisterModules;publicPaths;dynamicModuleResourcesMap;resourceLoader;pluginContainer;targetEnv;constructor(){this.modules={},this.cache={},this.publicPaths=[],this.dynamicModuleResourcesMap={},this.resourceLoader=new n.ResourceLoader(this,this.publicPaths),this.pluginContainer=new s.FarmRuntimePluginContainer([]),this.targetEnv=n.targetEnv,this.externalModules={},this.reRegisterModules=!1}require(e,t=!1){if(d[e])return d[e];if(this.cache[e]&&!this.pluginContainer.hookBail("readModuleCache",this.cache[e]))return this.cache[e].exports;let r=this.modules[e];if(!r){if(this.externalModules[e]){let r=this.externalModules[e];return t&&r.default||r}return("node"===this.targetEnv||!n.isBrowser)&&nodeRequire?nodeRequire(e):(this.pluginContainer.hookSerial("moduleNotFound",e),console.debug(\`[Farm] Module "\${e}" is not registered\`),{})}let o=new i.Module(e,this.require.bind(this));o.resource_pot=r.__farm_resource_pot__,this.pluginContainer.hookSerial("moduleCreated",o),this.cache[e]=o,(globalThis||global||window||{}).require||((globalThis||global||window||{require:undefined}).require=this.require.bind(this));let s=r(o,o.exports,this.require.bind(this),this.farmDynamicRequire.bind(this));return s&&s instanceof Promise?s.then(()=>(this.pluginContainer.hookSerial("moduleInitialized",o),o.exports)):(this.pluginContainer.hookSerial("moduleInitialized",o),o.exports)}farmDynamicRequire(e){if(this.modules[e]){let t=this.require(e);return t.__farm_async?t.default:Promise.resolve(t)}return this.loadDynamicResources(e)}loadDynamicResources(e,t=!1){let r=this.dynamicModuleResourcesMap[e];if(!r||0===r.length)throw Error(\`Dynamic imported module "\${e}" does not belong to any resource\`);return t&&(this.reRegisterModules=!0,this.clearCache(e)),Promise.all(r.map(e=>(t&&this.resourceLoader.setLoadedResource(e.path,!1),this.resourceLoader.load(e)))).then(()=>{if(!this.modules[e])throw Error(\`Dynamic imported module "\${e}" is not registered.\`);this.reRegisterModules=!1;let t=this.require(e);return t.__farm_async?t.default:t}).catch(t=>{throw console.error(\`[Farm] Error loading dynamic module "\${e}"\`,t),t})}register(e,t){if(this.modules[e]&&!this.reRegisterModules){console.warn(\`Module "\${e}" has registered! It should not be registered twice\`);return}this.modules[e]=t}update(e,t){this.modules[e]=t,this.clearCache(e)}delete(e){return!!this.modules[e]&&(this.clearCache(e),delete this.modules[e],!0)}getModuleUrl(e){let t=this.publicPaths[0]??"";return c.location?\`\${c.location.protocol}//\${c.location.host}\${t.endsWith("/")?t.slice(0,-1):t}/\${this.modules[e].__farm_resource_pot__}\`:this.modules[e].__farm_resource_pot__}getCache(e){return this.cache[e]}clearCache(e){return!!this.cache[e]&&(delete this.cache[e],!0)}setInitialLoadedResources(e){for(let t of e)this.resourceLoader.setLoadedResource(t)}setDynamicModuleResourcesMap(e){this.dynamicModuleResourcesMap=e}setPublicPaths(e){this.publicPaths=e,this.resourceLoader.publicPaths=this.publicPaths}setPlugins(e){this.pluginContainer.plugins=e}addPlugin(e){this.pluginContainer.plugins.every(t=>t.name!==e.name)&&this.pluginContainer.plugins.push(e)}removePlugin(e){this.pluginContainer.plugins=this.pluginContainer.plugins.filter(t=>t.name!==e)}setExternalModules(e){Object.assign(this.externalModules,e||{})}bootstrap(){this.pluginContainer.hookSerial("bootstrap",this)}}}},"433f8f8e")</script><div id=app-container><meta ssr></div>
  

<script data-farm-entry-script=true>(globalThis||window||global).f081367f80fe14896375a9f8b8918ca3.__farm_module_system__.setInitialLoadedResources([]),(globalThis||window||global).f081367f80fe14896375a9f8b8918ca3.__farm_module_system__.setDynamicModuleResourcesMap({}),(globalThis||window||global).f081367f80fe14896375a9f8b8918ca3.__farm_module_system__.setPublicPaths(["/"]),(globalThis||window||global).f081367f80fe14896375a9f8b8918ca3.__farm_module_system__.bootstrap()</script>"
`;
